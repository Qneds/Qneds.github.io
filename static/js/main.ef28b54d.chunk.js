(this.webpackJsonplab67=this.webpackJsonplab67||[]).push([[0],{71:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(73),r=a.n(n),i=(a(79),a(3)),o=(a.p,a(80),a(9)),j=(a(27),a(26),Object(c.createContext)({user:null,setUser:function(){}})),l=a(5),b=a(11),d=a(35),u=a.n(d),O=a(64),m=a(36);a(82),a(93);m.a.apps.length?m.a.app():m.a.initializeApp({apiKey:"AIzaSyBevFglsDo81vsiROHL7gHK9IYoEdwAY2E",authDomain:"lab6-c271e.firebaseapp.com",projectId:"lab6-c271e",storageBucket:"lab6-c271e.appspot.com",messagingSenderId:"717128845514",appId:"1:717128845514:web:ef1c10c38ea28c5ce34c33",measurementId:"G-VMB776V65B"});var p=m.a.auth(),h=m.a.firestore(),x=m.a.firestore.FieldValue.serverTimestamp(),f=function(){var e=Object(O.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.collection("users").doc(t.uid).set(Object(l.a)({},a)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.collection("users").doc(t.uid).get());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.collection("users").doc(t.uid).update(Object(l.a)({},a)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(e){return h.collection("offers").doc(e.id).update(Object(l.a)({},e.data))},y=function(e){return h.collection("offers").doc(e).get()},S=(a(71),a(0)),w=function(){var e=Object(c.useContext)(j),t=e.user,a=e.setUser,s=Object(c.useState)(""),n=Object(i.a)(s,2),r=n[0],o=n[1],l=Object(c.useState)(""),d=Object(i.a)(l,2),u=d[0],O=d[1],m=Object(c.useState)(!1),h=Object(i.a)(m,2),x=h[0],f=h[1],g=Object(c.useState)(!1),v=Object(i.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(!1),z=Object(i.a)(w,2),k=z[0],C=z[1],F=Object(c.useState)("Podano nieprawid\u0142owe dane"),D=Object(i.a)(F,2),G=D[0];D[1];return x?Object(S.jsx)(b.a,{to:"/main-page"}):N?Object(S.jsx)(b.a,{to:"/register"}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"log-reg-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Logowanie"})}),Object(S.jsxs)("div",{className:"log-reg-div",children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Email:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:r,onChange:function(e){o(e.target.value),!0===k&&C(!1)},id:"1",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Has\u0142o:"})}),Object(S.jsx)("input",{type:"password",name:"tagSearch",value:u,onChange:function(e){O(e.target.value),!0===k&&C(!1)},id:"2",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsx)("div",{children:k&&Object(S.jsx)("h6",{style:{color:"red"},children:G})})]}),Object(S.jsx)("div",{className:"buttons-form",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div m-*-auto text-center",style:{margin:"auto"},children:[Object(S.jsx)("button",{className:"btn border-btn btn-success m-2",onClick:function(){p.signInWithEmailAndPassword(r,u).then((function(e){a(e.user),f(!0),console.log(t)})).catch((function(e){o(""),O(""),C(!0),console.log(e)}))},style:{margin:"auto"},children:"Zaloguj si\u0119"}),Object(S.jsx)("button",{className:"btn border-btn btn-select  btn-secondary m-2",onClick:function(){y(!0)},style:{margin:"auto"},children:"Zarejestruj si\u0119"})]})})]})})},z=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),r=Object(i.a)(n,2),o=r[0],j=r[1],l=Object(c.useState)(""),d=Object(i.a)(l,2),u=d[0],O=d[1],m=Object(c.useState)(""),h=Object(i.a)(m,2),x=h[0],g=h[1],v=Object(c.useState)(""),N=Object(i.a)(v,2),y=N[0],w=N[1],z=Object(c.useState)(!1),k=Object(i.a)(z,2),C=k[0],F=k[1],D=Object(c.useState)(!1),G=Object(i.a)(D,2),A=G[0],B=G[1],E=Object(c.useState)("Podane has\u0142a s\u0105 r\xf3\u017cne"),P=Object(i.a)(E,2),U=P[0],I=(P[1],Object(c.useState)(!1)),W=Object(i.a)(I,2),H=W[0],Z=W[1],K=Object(c.useState)("Pola z (*) s\u0105 obowi\u0105zkowe"),L=Object(i.a)(K,2),T=L[0],V=(L[1],Object(c.useState)(!1)),Y=Object(i.a)(V,2),J=Y[0],M=Y[1],R=Object(c.useState)("Nie uda\u0142o si\u0119 za\u0142o\u017cy\u0107 konta"),_=Object(i.a)(R,2),q=_[0];_[1];return C?Object(S.jsx)(b.a,{to:"/"}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"log-reg-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Rejestracja"})}),Object(S.jsxs)("div",{className:"log-reg-div",children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Imi\u0119*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:a,onChange:function(e){s(e.target.value),H&&Z(!1),J&&M(!1)},id:"11",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Nazwisko*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:o,onChange:function(e){j(e.target.value),H&&Z(!1),J&&M(!1)},id:"2",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Email*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:u,onChange:function(e){O(e.target.value),H&&Z(!1),J&&M(!1)},id:"3",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsxs)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:["Has\u0142o ",Object(S.jsx)("br",{}),"(min. 6 znak\xf3w)*:"]})}),Object(S.jsx)("input",{type:"password",name:"tagSearch",value:x,onChange:function(e){g(e.target.value),e.target.value!==y?B(!0):B(!1),H&&Z(!1),J&&M(!1)},id:"4",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Powt\xf3rz has\u0142o*:"})}),Object(S.jsx)("input",{type:"password",name:"tagSearch",value:y,onChange:function(e){w(e.target.value),e.target.value!==x?B(!0):B(!1),H&&Z(!1),J&&M(!1)},id:"5",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{children:[A&&Object(S.jsx)("h6",{style:{color:"red"},children:U}),H&&Object(S.jsx)("h6",{style:{color:"red"},children:T}),J&&Object(S.jsx)("h6",{style:{color:"red"},children:q})]})]}),Object(S.jsx)("div",{className:"buttons-form",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div m-*-auto text-center",style:{margin:"auto"},children:[Object(S.jsx)("button",{className:"btn border-btn btn-success m-2",style:{margin:"auto"},onClick:function(){""!==a.trim()&&""!==o.trim()&&""!==u.trim()&&""!==x.trim()&&""!==y.trim()?A||(y===x?p.createUserWithEmailAndPassword(u,x).then((function(){p.signInWithEmailAndPassword(u,x).then((function(e){e.user.updateProfile({displayName:a+" "+o}),F(!0),f(e.user,{email:u,displayName:a+" "+o,phoneNumber:""})})).catch((function(e){M(!0),console.log(e)}))})).catch((function(e){console.log(e),M(!0)})):B(!0)):Z(!0)},children:"Zarejestruj si\u0119"}),Object(S.jsx)("button",{className:"btn border-btn btn-select  btn-secondary m-2",style:{margin:"auto"},onClick:function(){F(!0)},children:"Powr\xf3t"})]})})]})})},k=(a(90),function(){var e=Object(c.useContext)(j),t=e.user,a=e.setUser;Object(c.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e?a(e):(console.log("User not logged"),a(null))}));return function(){return e()}}),[]);return t?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("div",{className:"menu-outer sticky-top",children:Object(S.jsx)("div",{className:"menu-div",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div",children:[Object(S.jsx)(o.b,{to:"/main-page/settings",exact:!0,className:"btn btn-primary center-btn menu-buttons active",children:"Ustawienia"}),Object(S.jsx)(o.b,{to:"/main-page/offers",exact:!0,className:"btn btn-primary center-btn menu-buttons active",children:"Przeszukuj oferty"}),Object(S.jsx)(o.b,{to:"/main-page/your-offers",exact:!0,className:"btn btn-primary center-btn menu-buttons active",children:"Twoje oferty"}),Object(S.jsx)(o.b,{to:"/main-page/borrowed",exact:!0,className:"btn btn-primary center-btn menu-buttons active",children:"Aktualnie wypo\u017cyczane"}),Object(S.jsx)(o.b,{to:"/main-page/history",exact:!0,className:"btn btn-primary center-btn menu-buttons active",children:"Historia"}),Object(S.jsx)("a",{href:"/",className:"btn btn-primary center-btn menu-buttons active",onClick:function(){a(null),p.signOut()},children:"Wyloguj"}),Object(S.jsxs)("div",{className:"logged-data bg-info",children:["Zalogowany: ",t.displayName]})]})})})}):(console.log(t),Object(S.jsx)("div",{className:"not-logged",children:Object(S.jsx)("h1",{children:"You are not logged in."})}))}),C=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)(t.displayName.split(" ")[0])),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(c.useState)(t.displayName.split(" ")[1]),l=Object(i.a)(o,2),b=l[0],d=l[1],u=Object(c.useState)(t.email),O=Object(i.a)(u,2),m=O[0],h=O[1],x=Object(c.useState)(""),f=Object(i.a)(x,2),N=f[0],y=f[1],w=Object(c.useState)(""),z=Object(i.a)(w,2),k=z[0],C=z[1],F=Object(c.useState)(""),D=Object(i.a)(F,2),G=D[0],A=D[1],B=Object(c.useState)(""),E=Object(i.a)(B,2),P=E[0],U=E[1],I=Object(c.useState)(["none","Zmie\u0144 has\u0142o"]),W=Object(i.a)(I,2),H=W[0],Z=W[1],K=Object(c.useState)(!1),L=Object(i.a)(K,2),T=L[0],V=L[1],Y=Object(c.useState)(!1),J=Object(i.a)(Y,2),M=J[0],R=J[1],_=Object(c.useState)("Podane has\u0142a s\u0105 r\xf3\u017cne"),q=Object(i.a)(_,2),Q=q[0],X=(q[1],Object(c.useState)(!1)),$=Object(i.a)(X,2),ee=$[0],te=$[1],ae=Object(c.useState)("Podanoe nieprawid\u0142owe aktualne has\u0142o"),ce=Object(i.a)(ae,2),se=ce[0],ne=(ce[1],Object(c.useState)(!1)),re=Object(i.a)(ne,2),ie=re[0],oe=re[1],je=Object(c.useState)("Pola z (*) s\u0105 obowi\u0105zkowe"),le=Object(i.a)(je,2),be=le[0],de=(le[1],Object(c.useState)(!1)),ue=Object(i.a)(de,2),Oe=ue[0],me=ue[1],pe=Object(c.useState)("Nale\u017cy poda\u0107 has\u0142a"),he=Object(i.a)(pe,2),xe=he[0],fe=(he[1],Object(c.useState)(!1)),ge=Object(i.a)(fe,2),ve=ge[0],Ne=ge[1],ye=Object(c.useState)("Nie zaktualizowa\u0107 danych"),Se=Object(i.a)(ye,2),we=Se[0],ze=(Se[1],Object(c.useState)(!1)),ke=Object(i.a)(ze,2),Ce=ke[0],Fe=ke[1],De=Object(c.useState)("Dane zosta\u0142y zaktualizowane"),Ge=Object(i.a)(De,2),Ae=Ge[0],Be=(Ge[1],Object(c.useState)(!1)),Ee=Object(i.a)(Be,2),Pe=Ee[0],Ue=Ee[1],Ie=Object(c.useState)("Has\u0142o zosta\u0142o zaktualizowane"),We=Object(i.a)(Ie,2),He=We[0],Ze=(We[1],Object(c.useState)(!1)),Ke=Object(i.a)(Ze,2),Le=Ke[0],Te=Ke[1],Ve=Object(c.useState)("Nie uda\u0142o si\u0119 zaktualizowa\u0107 has\u0142a"),Ye=Object(i.a)(Ve,2),Je=Ye[0];Ye[1];if(!t)return Object(S.jsx)(S.Fragment,{});T||(V(!0),g(t).then((function(e){y(e.data().phoneNumber)})));return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"settings-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Ustawienia"})}),Object(S.jsxs)("div",{className:"log-reg-div",children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"3",children:"Imi\u0119*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:n,onChange:function(e){r(e.target.value),ie&&oe(!1),ve&&Ne(!1),Ce&&Fe(!1)},id:"20",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"4",children:"Nazwisko*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:b,onChange:function(e){d(e.target.value),ie&&oe(!1),ve&&Ne(!1),Ce&&Fe(!1)},id:"21",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"5",children:"Email*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:m,onChange:function(e){h(e.target.value),ie&&oe(!1),ve&&Ne(!1),Ce&&Fe(!1)},id:"23",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"6",children:"Numer telefonu:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:N,onChange:function(e){return y(e.target.value)},id:"24",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{children:[ie&&Object(S.jsx)("h6",{style:{color:"red"},children:be}),ve&&Object(S.jsx)("h6",{style:{color:"red"},children:we}),Ce&&Object(S.jsx)("h6",{style:{color:"green"},children:Ae})]})]}),Object(S.jsx)("div",{className:"buttons-form",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div m-*-auto text-center",children:[Object(S.jsx)("button",{className:"btn btn border-btn btn-success m-2",onClick:function(){""!==n.trim()&&""!==b.trim()&&""!==m.trim()?t.updateProfile({displayName:n+" "+b}).then((function(){t.updateEmail(m).then((function(){v(t,{email:m,displayName:n+" "+b,phoneNumber:N}).then((function(){Fe(!0)})).catch((function(e){Ne(!0),console.log(e)}))})).catch((function(e){Ne(!0),console.log(e)}))})).catch((function(e){Ne(!0),console.log(e)})):oe(!0)},children:"Zapisz"}),Object(S.jsx)("button",{className:"btn btn border-btn btn-dark m-2",onClick:function(){"none"===H[0]?Z(["block","Showaj"]):Z(["none","Zmie\u0144 has\u0142o"])},children:H[1]})]})}),Object(S.jsxs)("div",{className:"password-change-box",style:{display:H[0]},children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"7",children:"Stare has\u0142o:"})}),Object(S.jsx)("input",{type:"password",name:"descSearch",value:k,onChange:function(e){C(e.target.value),ee&&te(!1),Le&&Te(!1),Pe&&Ue(!1),Oe&&me(!1)},id:"25",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsxs)("span",{className:"input-group-text",id:"8",children:["Nowe has\u0142o",Object(S.jsx)("br",{}),"(min. 6 znak\xf3w):"]})}),Object(S.jsx)("input",{type:"password",name:"descSearch",value:G,onChange:function(e){A(e.target.value),e.target.value!==P?R(!0):R(!1),ee&&te(!1),Le&&Te(!1),Pe&&Ue(!1),Oe&&me(!1)},id:"26",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"9",children:"Powt\xf3rz has\u0142o:"})}),Object(S.jsx)("input",{type:"password",name:"descSearch",value:P,onChange:function(e){U(e.target.value),e.target.value!==G?R(!0):R(!1),ee&&te(!1),Le&&Te(!1),Pe&&Ue(!1),Oe&&me(!1)},id:"27",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{children:[Oe&&Object(S.jsx)("h6",{style:{color:"red"},children:xe}),M&&Object(S.jsx)("h6",{style:{color:"red"},children:Q}),Le&&Object(S.jsx)("h6",{style:{color:"red"},children:Je}),ee&&Object(S.jsx)("h6",{style:{color:"red"},children:se}),Pe&&Object(S.jsx)("h6",{style:{color:"green"},children:He})]}),Object(S.jsx)("div",{className:"btn-div-frame space-app buttons-page-div",children:Object(S.jsx)("button",{className:"btn btn border-btn btn-success m-2",onClick:function(){""!==k.trim()&&""!==G.trim()&&""!==P.trim()?Oe||(P===G?p.signInWithEmailAndPassword(m,k).then((function(e){t.updatePassword(G).then((function(){Ue(!0)})).catch((function(e){Te(!0)}))})).catch((function(e){te(!0)})):R(!0)):me(!0)},children:"Zapisz has\u0142o"})})]})]})})};function F(e){return e.toDate().toLocaleString()?e.toDate().toLocaleString():""}var D=function(e){return Object(S.jsxs)("div",{className:"found_el",children:["Znaleziono ",e.numberOfOffers," ofert"]})},G=function(e){var t=Object(c.useContext)(j),a=t.user,s=(t.setUser,Object(c.useState)(!1)),n=Object(i.a)(s,2),r=n[0],o=n[1],d=Object(c.useState)(!0),u=Object(i.a)(d,2),O=u[0],m=u[1],p=Object(c.useState)("Kontakt"),f=Object(i.a)(p,2),v=f[0],w=f[1],z=Object(c.useState)("none"),k=Object(i.a)(z,2),C=k[0],D=k[1],G=Object(c.useState)(""),A=Object(i.a)(G,2),H=A[0],Z=A[1],K=Object(c.useState)(""),L=Object(i.a)(K,2),T=L[0],V=L[1],Y=Object(c.useState)(""),J=Object(i.a)(Y,2),M=J[0],R=J[1],_=Object(c.useState)(null),q=Object(i.a)(_,2),Q=q[0],X=q[1],$=Object(c.useState)(""),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ce=Object(c.useState)(""),se=Object(i.a)(ce,2),ne=se[0],re=se[1],ie=Object(c.useState)(""),oe=Object(i.a)(ie,2),je=oe[0],le=oe[1],be=Object(c.useState)(""),de=Object(i.a)(be,2),ue=de[0],Oe=de[1],me=Object(c.useState)(null),pe=Object(i.a)(me,2),he=pe[0],xe=pe[1],fe=Object(c.useState)(!1),ge=Object(i.a)(fe,2),ve=ge[0],Ne=ge[1],ye=Object(c.useState)("none"),Se=Object(i.a)(ye,2),we=(Se[0],Se[1],Object(c.useState)("")),ze=Object(i.a)(we,2),ke=(ze[0],ze[1],Object(c.useState)(!1)),Ce=Object(i.a)(ke,2),Fe=(Ce[0],Ce[1]),De=Object(c.useState)(!1),Ge=Object(i.a)(De,2),Ae=Ge[0],Be=Ge[1],Ee=Object(c.useState)(e.id),Pe=Object(i.a)(Ee,2),Ue=Pe[0],Ie=Pe[1];Object(c.useEffect)((function(){var t=!0;return t&&(Ie(e.id),Fe(!1)),function(){return t=!1}}),[e.id]);if(null===Q&&!Ae&&""!==Ue)return Be(!0),y(Ue).then((function(e){xe(e.data().borrowedBy),X(e.data().state),ae(F(e.data().date)),re(e.data().auto),le(e.data().description),Oe(e.data().cost),e.data().borrowedBy===a.uid?Ne(!0):Ne(!1)})),Object(S.jsx)(S.Fragment,{});if(r)return Object(S.jsx)(b.a,{to:{pathname:"/main-page/your-offers/edit",state:{auto:ne,desc:je,cost:ue,id:Ue,stat:Q}}});var We="";We="Available"===Q?"Dost\u0119pny":"Borrowed"===Q?"Wypo\u017cyczony":"Niedost\u0119pny";var He="block";return"Borrowed"===Q&&(He="none"),!0===e.toOwner?Object(S.jsxs)("div",{className:"offer-box",children:[Object(S.jsx)(P,{auto:ne,cost:ue,addDate:te}),Object(S.jsx)("div",{className:"offer-desc",children:Object(S.jsx)(U,{desc:je})}),Object(S.jsx)("div",{className:"offer-bar-top"}),Object(S.jsx)("div",{className:"offer-bar-bottom"}),Object(S.jsx)("div",{className:"offer-status",children:Object(S.jsx)(W,{status:We})}),Object(S.jsx)("div",{className:"offer-buttons",style:{display:He},children:Object(S.jsx)("button",{className:"btn border-btn btn-warning",onClick:function(){o(!0)},children:"Edytuj"})})]}):Object(S.jsxs)("div",{className:"offer-box",children:[Object(S.jsx)(P,{auto:ne,cost:ue,addDate:te}),Object(S.jsx)("div",{className:"offer-desc",children:Object(S.jsx)(U,{desc:je})}),Object(S.jsx)("div",{className:"offer-bar-top"}),Object(S.jsx)("div",{className:"offer-bar-bottom"}),Object(S.jsxs)("div",{className:"offer-holder",children:[Object(S.jsx)("div",{className:"offer-contact",style:{display:C},children:Object(S.jsx)(I,{name:T,email:H,number:M})}),Object(S.jsx)(E,{isBorrowing:ve,id:Ue})]}),Object(S.jsxs)("div",{className:"offer-buttons",children:[Object(S.jsx)("button",{className:"btn border-btn btn btn-info",onClick:function(){!0===O?g(a).then((function(e){w("Schowaj"),D("block"),m(!1),Z(e.data().email),V(e.data().displayName),R(e.data().phoneNumber)})):(m(!0),w("Kontakt"),D("none"))},children:v}),Object(S.jsx)(B,{clickHandler:function(){y(Ue).then((function(e){X(e.data().state),"Available"===e.data().state?N({id:e.id,data:{state:"Borrowed",borrowedBy:a.uid}}).then((function(t){var c;(c={offerId:Ue,userId:a.uid,borrowDate:x,returnDate:""},h.collection("borrowHistory").add(Object(l.a)({},c))).then((function(t){N({id:e.id,data:{historyDoc:t.id}}).then((function(){xe(a.uid),X("Borrowed"),Ne(!0)}))}))})):"Borrowed"===e.data().state&&e.data().borrowedBy===a.uid&&function(e){return h.collection("borrowHistory").doc(e).update({returnDate:x})}(e.data().historyDoc).then((function(){N({id:e.id,data:{state:"Available",borrowedBy:null,historyDoc:null}}).then((function(){X("Available"),Ne(!1),xe(null)}))}))}))},available:Q,borrowingPerson:he})]})]})},A=function(e){return Object(S.jsx)("li",{className:"list-group-item",children:Object(S.jsx)(G,{toOwner:e.toOwner,addDate:e.addDate,owner:e.owner,auto:e.auto,desc:e.desc,state:e.state,cost:e.cost,id:e.id},e.id)})},B=function(e){var t=Object(c.useContext)(j),a=t.user;t.setUser;return"Available"===e.available?Object(S.jsx)("button",{className:"btn border-btn btn-success",onClick:e.clickHandler,children:"Wypo\u017cycz"}):"Borrowed"===e.available?e.borrowingPerson===a.uid?Object(S.jsx)("button",{className:"btn border-btn btn-secondary",onClick:e.clickHandler,children:"Zwr\xf3\u0107"}):Object(S.jsx)("button",{className:"btn border-btn btn-warning",disabled:!0,children:"Auto zosta\u0142o ju\u017c wypo\u017cczone"}):Object(S.jsx)("button",{className:"btn border-btn btn-outline-dark",disabled:!0,children:"Oferta niedost\u0119pna"})},E=function(e){var t=Object(c.useContext)(j),a=t.user,s=(t.setUser,Object(c.useState)("none")),n=Object(i.a)(s,2),r=n[0],o=n[1],l=Object(c.useState)(""),b=Object(i.a)(l,2),d=b[0],u=b[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),p=m[0],x=m[1],f=Object(c.useState)(e.isBorrowing),g=Object(i.a)(f,2),v=g[0],N=g[1];return Object(c.useEffect)((function(){var t=!0;return t&&(N(e.isBorrowing),x(!1)),function(){return t=!1}}),[e.isBorrowing]),p||(x(!0),v?function(e,t){return h.collection("borrowHistory").where("offerId","==",t).where("userId","==",e.uid).where("returnDate","==","").get()}(a,e.id).then((function(e){e.forEach((function(e){o("block"),u(F(e.data().borrowDate))}))})).catch((function(e){o("none"),u("")})):(o("none"),u(""))),Object(S.jsx)("div",{className:"offer-borrow-date",style:{display:r},children:Object(S.jsxs)("table",{className:"table",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("th",{scope:"col center",children:"Data wypo\u017cyczenia"})})}),Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("td",{children:d})})})]})})},P=function(e){return Object(S.jsx)("div",{className:"offer-main",children:Object(S.jsxs)("table",{className:"table",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{scope:"col",children:"Pojazd"}),Object(S.jsx)("th",{scope:"col",children:"Data dodania"}),Object(S.jsx)("th",{scope:"col",children:"Cena"})]})}),Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.auto}),Object(S.jsx)("td",{children:e.addDate}),Object(S.jsx)("td",{children:e.cost})]})})]})})},U=function(e){return Object(S.jsx)("div",{children:Object(S.jsxs)("table",{className:"table",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("th",{scope:"col center",children:"Opis"})})}),Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("td",{children:e.desc})})})]})})},I=function(e){return Object(S.jsx)("div",{children:Object(S.jsxs)("table",{className:"table border-dark",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("th",{colspan:"2",children:"Kontakt"})})}),Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Imie i nazwisko"}),Object(S.jsx)("td",{children:e.name})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Email"}),Object(S.jsx)("td",{children:e.email})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Numer telefonu"}),Object(S.jsx)("td",{children:e.number})]})]})]})})},W=function(e){var t="";return t="Dost\u0119pny"===e.status?"bg-success":"Wypo\u017cyczony"===e.status?"bg-primary":"bg-secondary",Object(S.jsx)("div",{children:Object(S.jsxs)("table",{className:"table",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("th",{scope:"col center",children:"Status"})})}),Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("td",{className:t+" text-white",children:e.status})})})]})})},H=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=(s[0],s[1],Object(c.useState)(!1)),r=Object(i.a)(n,2),o=r[0],l=r[1],d=Object(c.useState)(null),u=Object(i.a)(d,2),O=u[0],m=u[1],p=function(e){if(null===e||""===e)(function(e){return h.collection("offers").where("owner","==",e.uid).get()})(t).then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),m(t)}));else{m([]);var a=[];e.split(" ").forEach((function(e){(function(e,t){return h.collection("offers").where("owner","==",e.uid).orderBy("auto").startAt(t).endAt(t+"\uf8ff").get()})(t,e).then((function(e){e.forEach((function(e){a.some((function(t){return t.id===e.id}))||a.push({id:e.id,data:e.data()})})),m(a)}))}))}};if(!t)return Object(S.jsx)(S.Fragment,{});if(o)return Object(S.jsx)(b.a,{to:"/main-page/your-offers/add"});if(null===O)return p(""),Object(S.jsx)(S.Fragment,{});var x=O.map((function(e){return Object(S.jsx)(A,{toOwner:!0,owner:e.data.owner,auto:e.data.auto,desc:e.data.description,state:e.data.state,cost:e.data.cost,id:e.id},e.id)}));return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"offer-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Twoje oferty"})}),Object(S.jsxs)("div",{className:"searching-bar",children:[Object(S.jsx)("div",{className:"container cont",children:Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Wyszukuj:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",id:"searchDesc",className:"form-control","aria-label":"Small",onInput:function(e){return p(e.target.value)},"aria-describedby":"inputGroup-sizing-sm"})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D,{numberOfOffers:O.length})}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:"btn border-btn btn-success m-2",onClick:function(){l(!0)},children:"Dodaj og\u0142oszenie"})})]}),Object(S.jsx)("div",{className:"results-box",children:Object(S.jsx)("ul",{className:"list-group",children:x})})]})})},Z=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(c.useState)(""),d=Object(i.a)(o,2),u=d[0],O=d[1],m=Object(c.useState)(""),p=Object(i.a)(m,2),f=p[0],g=p[1],v=Object(c.useState)(!1),N=Object(i.a)(v,2),y=N[0],w=N[1],z=Object(c.useState)(!1),k=Object(i.a)(z,2),C=k[0],F=k[1],D=Object(c.useState)("Pola z (*) s\u0105 obowi\u0105zkowe"),G=Object(i.a)(D,2),A=G[0],B=(G[1],Object(c.useState)(!1)),E=Object(i.a)(B,2),P=E[0],U=E[1],I=Object(c.useState)("Nie uda\u0142o si\u0119 doda\u0107 og\u0142oszenia"),W=Object(i.a)(I,2),H=W[0];W[1];if(!t)return Object(S.jsx)(S.Fragment,{});return y?Object(S.jsx)(b.a,{to:"/main-page/your-offers"}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"add-edit-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Dodawanie oferty"})}),Object(S.jsxs)("div",{className:"add-edit-box",children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"0",children:"Pojazd*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:n,onChange:function(e){r(e.target.value),C&&F(!1),P&&U(!1)},id:"4",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"1",children:"Opis:"})}),Object(S.jsx)("textarea",{className:"form-control","aria-label":"With textarea",rows:"3",value:u,onChange:function(e){O(e.target.value),C&&F(!1),P&&U(!1)}})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"2",children:"Cena*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:f,onChange:function(e){g(e.target.value),C&&F(!1),P&&U(!1)},id:"5",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{children:[C&&Object(S.jsx)("h6",{style:{color:"red"},children:A}),P&&Object(S.jsx)("h6",{style:{color:"red"},children:H})]})]}),Object(S.jsx)("div",{className:"buttons-form",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div m-*-auto text-center",children:[Object(S.jsx)("button",{className:"btn border-btn btn-success m-2",onClick:function(){var e;""!==n.trim()&&""!==f.trim()?(e={auto:n,description:u,cost:f,owner:t.uid,state:"Available",borrowedBy:null,date:x},h.collection("offers").add(Object(l.a)({},e))).then((function(){w(!0)})).catch((function(e){U(!0)})):F(!0)},children:"Dodaj"}),Object(S.jsx)("button",{className:"btn border-btn btn-secondary m-2",onClick:function(){w(!0)},children:"Powr\xf3t"})]})})]})})},K=function(e){var t=Object(c.useContext)(j),a=(t.user,t.setUser,Object(c.useState)(e.initState)),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(c.useState)(e.id),l=Object(i.a)(o,2),b=l[0],d=(l[1],Object(c.useState)(!1)),u=Object(i.a)(d,2),O=u[0],m=u[1],p=Object(c.useState)("Nie uda\u0142o si\u0119 zmieni\u0107 stanu og\u0142oszenia"),h=Object(i.a)(p,2),f=h[0],g=(h[1],Object(c.useState)(!1)),v=Object(i.a)(g,2),w=v[0],z=v[1];w||(z(!0),y(b).then((function(e){r(e.data().state)})).catch((function(e){m(!0),console.log(e)})));return"Available"===n?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("button",{className:"btn border-btn btn-danger m-2",onClick:function(){O&&m(!1),y(b).then((function(e){"Available"===e.data().state?N({id:b,data:{state:"Unavailable"}}).then((function(){r("Unavailable")})).catch((function(t){m(!0),console.log(t),r(e.data().state)})):r(e.data().state)})).catch((function(e){m(!0),console.log(e)}))},children:"Dezaktywuj"}),O&&Object(S.jsx)("h6",{style:{color:"red"},children:f})]}):"Borrowed"===n?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("button",{className:"btn border-btn btn-danger m-2",disable:!0,children:"Nie mo\u017cna modyfikowa\u0107 tej oferty"})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("button",{className:"btn border-btn btn-warning m-2",onClick:function(){O&&m(!1),y(b).then((function(e){"Unavailable"===e.data().state?N({id:b,data:{state:"Available",date:x}}).then((function(){r("Available")})).catch((function(t){m(!0),console.log(t),r(e.data().state)})):r(e.data().state)})).catch((function(e){m(!0),console.log(e)}))},children:"Aktywuj ponownie"}),O&&Object(S.jsx)("h6",{style:{color:"red"},children:f})]})},L=function(e){var t=Object(c.useContext)(j),a=t.user,s=(t.setUser,e.location.state),n=Object(c.useState)(s.auto),r=Object(i.a)(n,2),o=r[0],l=r[1],d=Object(c.useState)(s.desc),u=Object(i.a)(d,2),O=u[0],m=u[1],p=Object(c.useState)(s.cost),h=Object(i.a)(p,2),x=h[0],f=h[1],g=Object(c.useState)(!1),v=Object(i.a)(g,2),y=v[0],w=v[1],z=Object(c.useState)(!1),k=Object(i.a)(z,2),C=k[0],F=k[1],D=Object(c.useState)("Pola z (*) s\u0105 obowi\u0105zkowe"),G=Object(i.a)(D,2),A=G[0],B=(G[1],Object(c.useState)(!1)),E=Object(i.a)(B,2),P=E[0],U=E[1],I=Object(c.useState)("Nie uda\u0142o si\u0119 zaktualizowa\u0107 og\u0142oszenia"),W=Object(i.a)(I,2),H=W[0];W[1];if(!a)return Object(S.jsx)(S.Fragment,{});if(y)return Object(S.jsx)(b.a,{to:"/main-page/your-offers"});var Z="block";return"Borrowed"===s.state&&(Z="none"),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"add-edit-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Edycja oferty"})}),Object(S.jsxs)("div",{className:"add-edit-box",children:[Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"0",children:"Auto*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:o,onChange:function(e){l(e.target.value),C&&F(!1),P&&U(!1)},id:"1",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"1",children:"Opis:"})}),Object(S.jsx)("textarea",{className:"form-control","aria-label":"With textarea",rows:"3",value:O,onChange:function(e){m(e.target.value),C&&F(!1),P&&U(!1)}})]}),Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"2",children:"Cena*:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",value:x,onChange:function(e){f(e.target.value),C&&F(!1),P&&U(!1)},id:"3",className:"form-control","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm"})]}),Object(S.jsxs)("div",{children:[C&&Object(S.jsx)("h6",{style:{color:"red"},children:A}),P&&Object(S.jsx)("h6",{style:{color:"red"},children:H})]})]}),Object(S.jsx)("div",{className:"buttons-form",children:Object(S.jsxs)("div",{className:"btn-div-frame space-app buttons-page-div m-*-auto text-center",children:[Object(S.jsx)("button",{className:"btn border-btn btn-success m-2",onClick:function(){""!==o.trim()&&""!==x.trim()?N({id:s.id,data:{auto:o,description:O,cost:x}}).then((function(){w(!0)})).catch((function(e){console.log(e),U(!0)})):F(!0)},style:{display:Z},children:"Zapisz"}),Object(S.jsx)("button",{className:"btn border-btn btn-secondary m-2",onClick:function(){w(!0)},children:"Powr\xf3t"}),Object(S.jsx)(K,{initState:s.state,id:s.id})]})})]})})},T=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=(s[0],s[1],Object(c.useState)(!1)),r=Object(i.a)(n,2),o=(r[0],r[1],Object(c.useState)(null)),l=Object(i.a)(o,2),b=l[0],d=l[1],u=Object(c.useState)(!1),O=Object(i.a)(u,2),m=O[0],p=O[1],x=function(e){if(null===e||""===e)h.collection("offers").where("state","==","Available").get().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),d(t)}));else{d([]);var t=[];e.split(" ").forEach((function(e){(function(e){return h.collection("offers").orderBy("auto").startAt(e).endAt(e+"\uf8ff").where("state","==","Available").get()})(e).then((function(e){e.forEach((function(e){t.some((function(t){return t.id===e.id}))||t.push({id:e.id,data:e.data()})})),d(t)}))}))}};if(!t)return Object(S.jsx)(S.Fragment,{});if(null===b&&!m)return p(!0),x(""),Object(S.jsx)(S.Fragment,{});var f=[],g=0;return null!==b&&(g=(f=b.map((function(e){return Object(S.jsx)(A,{toOwner:!1,addDate:e.data.date,owner:e.data.owner,auto:e.data.auto,desc:e.data.description,state:e.data.state,cost:e.data.cost,id:e.id},e.id)}))).length),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"offer-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Wyszukiwarka ofert"})}),Object(S.jsxs)("div",{className:"searching-bar",children:[Object(S.jsx)("div",{className:"container cont",children:Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Wyszukuj:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",id:"searchDesc",className:"form-control","aria-label":"Small",onInput:function(e){return x(e.target.value)},"aria-describedby":"inputGroup-sizing-sm"})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D,{numberOfOffers:g})})]}),Object(S.jsx)("div",{className:"results-box",children:Object(S.jsx)("ul",{className:"list-group",children:f})})]})})},V=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=(s[0],s[1],Object(c.useState)(!1)),r=Object(i.a)(n,2),o=r[0],l=(r[1],Object(c.useState)(null)),d=Object(i.a)(l,2),u=d[0],O=d[1],m=Object(c.useState)(!1),p=Object(i.a)(m,2),x=p[0],f=p[1],g=function(e){if(null===e||""===e)(function(e){return h.collection("offers").where("borrowedBy","==",e.uid).get()})(t).then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),O(t)}));else{O([]);var a=[];e.split(" ").forEach((function(e){(function(e,t){return h.collection("offers").where("borrowedBy","==",e.uid).orderBy("auto").startAt(t).endAt(t+"\uf8ff").get()})(t,e).then((function(e){e.forEach((function(e){a.some((function(t){return t.id===e.id}))||a.push({id:e.id,data:e.data()})})),O(a)}))}))}};if(!t)return Object(S.jsx)(S.Fragment,{});if(o)return Object(S.jsx)(b.a,{to:"/main-page/your-offers/add"});if(null===u&&!x)return f(!0),g(""),Object(S.jsx)(S.Fragment,{});var v=[],N=0;return null!==u&&(N=(v=u.map((function(e){return Object(S.jsx)(A,{toOwner:!1,addDate:e.data.date,owner:e.data.owner,auto:e.data.auto,desc:e.data.description,state:e.data.state,cost:e.data.cost,id:e.id},e.id)}))).length),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"offer-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Wypo\u017cyczone pojazdy"})}),Object(S.jsxs)("div",{className:"searching-bar",children:[Object(S.jsx)("div",{className:"container cont",children:Object(S.jsxs)("div",{className:"input-group input-group-sm mb-3",children:[Object(S.jsx)("div",{className:"input-group-prepend",children:Object(S.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm2",children:"Wyszukuj:"})}),Object(S.jsx)("input",{type:"text",name:"descSearch",id:"searchDesc",className:"form-control","aria-label":"Small",onInput:function(e){return g(e.target.value)},"aria-describedby":"inputGroup-sizing-sm"})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D,{numberOfOffers:N})})]}),Object(S.jsx)("div",{className:"results-box",children:Object(S.jsx)("ul",{className:"list-group",children:v})})]})})},Y=function(e){var t=Object(c.useContext)(j),a=(t.user,t.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=s[0],r=s[1],o=Object(c.useState)(!0),l=Object(i.a)(o,2),b=(l[0],l[1],Object(c.useState)("Kontakt")),d=Object(i.a)(b,2),u=(d[0],d[1],Object(c.useState)("none")),O=Object(i.a)(u,2),m=(O[0],O[1],Object(c.useState)("")),p=Object(i.a)(m,2),x=(p[0],p[1],Object(c.useState)("")),f=Object(i.a)(x,2),g=(f[0],f[1],Object(c.useState)("")),v=Object(i.a)(g,2),N=(v[0],v[1],Object(c.useState)(null)),y=Object(i.a)(N,2),w=(y[0],y[1],Object(c.useState)("")),z=Object(i.a)(w,2),k=(z[0],z[1],Object(c.useState)(null)),C=Object(i.a)(k,2),D=(C[0],C[1],Object(c.useState)(!1)),A=Object(i.a)(D,2),B=(A[0],A[1],Object(c.useState)("")),E=Object(i.a)(B,2),P=E[0],U=E[1],I=Object(c.useState)(""),W=Object(i.a)(I,2),H=W[0],Z=W[1],K=Object(c.useState)(!1),L=Object(i.a)(K,2),T=L[0],V=L[1];return T?Object(S.jsx)("li",{className:"list-group-item",children:Object(S.jsxs)("div",{className:"history-box",children:[Object(S.jsxs)("div",{className:"history-dates",children:[Object(S.jsxs)("div",{className:"history-date-from",children:["Od: ",P]}),Object(S.jsxs)("div",{className:"history-date-to",children:["Do: ",H]})]}),Object(S.jsx)("div",{className:"history-offer",children:Object(S.jsx)(G,{toOwner:!1,id:n},n)})]})}):(V(!0),function(e){return h.collection("borrowHistory").doc(e).get()}(e.id).then((function(e){U(F(e.data().borrowDate)),r(e.data().offerId),""===e.data().returnDate?Z("teraz"):Z(F(e.data().returnDate))})).catch((function(e){})),Object(S.jsx)(S.Fragment,{}))},J=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,Object(c.useState)("")),s=Object(i.a)(a,2),n=(s[0],s[1],Object(c.useState)(!1)),r=Object(i.a)(n,2),o=(r[0],r[1],Object(c.useState)(null)),l=Object(i.a)(o,2),b=l[0],d=l[1],u=Object(c.useState)(!1),O=Object(i.a)(u,2),m=O[0],p=O[1];if(!t)return Object(S.jsx)(S.Fragment,{});if(null===b&&!m)return p(!0),function(e){return h.collection("borrowHistory").where("userId","==",e.uid).get()}(t).then((function(e){var t=[];e.forEach((function(e){t.push(e.id)})),d(t)})).catch((function(e){d([])})),Object(S.jsx)(S.Fragment,{});var x=[],f=0;return null!==b&&(f=(x=b.map((function(e){return Object(S.jsx)(Y,{id:e},e)}))).length),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"offer-con",children:[Object(S.jsx)("div",{className:"log-reg-tit",children:Object(S.jsx)("h2",{children:"Historia"})}),Object(S.jsx)("div",{className:"searching-bar",children:Object(S.jsx)("div",{children:Object(S.jsx)(D,{numberOfOffers:f})})}),Object(S.jsx)("div",{className:"results-box",children:Object(S.jsx)("ul",{className:"list-group",children:x})})]})})},M=function(){var e=Object(c.useContext)(j),t=e.user,a=(e.setUser,"");return null!==t&&(a="Witaj, "+t.displayName),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{path:"/",exact:!0,children:Object(S.jsx)("div",{className:"myFloat",children:Object(S.jsx)(w,{})})}),Object(S.jsx)(b.b,{path:"/register",exact:!0,children:Object(S.jsx)("div",{className:"myFloat",children:Object(S.jsx)(z,{})})}),Object(S.jsx)(b.b,{path:"/main-page",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)("div",{className:"welcome-page",children:Object(S.jsx)("h1",{children:a})})]})}),Object(S.jsx)(b.b,{path:"/main-page/settings",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(C,{})]})}),Object(S.jsx)(b.b,{path:"/main-page/offers",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(T,{})]})}),Object(S.jsx)(b.b,{path:"/main-page/borrowed",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(V,{})]})}),Object(S.jsx)(b.b,{path:"/main-page/your-offers",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(H,{})]})}),Object(S.jsx)(b.b,{path:"/main-page/your-offers/add",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(Z,{})]})}),Object(S.jsx)(b.b,{path:"/main-page/your-offers/edit",exact:!0,render:function(e){return Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(L,Object(l.a)({},e))]})}}),Object(S.jsx)(b.b,{path:"/main-page/history",exact:!0,children:Object(S.jsxs)("div",{className:"myFloat",children:[Object(S.jsx)(k,{}),Object(S.jsx)(J,{})]})}),Object(S.jsx)(b.b,{children:Object(S.jsx)("section",{children:Object(S.jsx)("h1",{children:"Error 404 - not found"})})})]})})},R=(a(91),function(){return Object(S.jsx)("div",{className:"outer",children:Object(S.jsx)("div",{className:"inner",children:Object(S.jsx)("h2",{className:"title",children:"Wypo\u017cyczalnia pojazd\xf3w"})})})});var _=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(S.jsx)(o.a,{basename:"",children:Object(S.jsxs)(j.Provider,{value:{user:a,setUser:s},children:[Object(S.jsx)(R,{}),Object(S.jsx)(M,{})]})})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(_,{})}),document.getElementById("root")),q()}},[[92,1,2]]]);
//# sourceMappingURL=main.ef28b54d.chunk.js.map